local monitor = peripheral.find("monitor")
local request = http.get ("http://worldtimeapi.org/api/ip")
local requestRep = request.readAll()
local datetimeFind = string.find(requestRep, "datetime")
print(datetimeFind)
local preDatetime = string.sub(requestRep, datetimeFind+11)
--print(preDatetime)
local datetime = string.sub(preDatetime, 1, 19)
print(datetime)
local year = string.sub(datetime, 1, 4)
print(year)
local month = string.sub(datetime, 6, 7)
print(month)
local day = string.sub(datetime, 9, 10)
print(day)
local findT = string.find(datetime, "T")
local hour = string.sub(datetime, findT+1, findT+2)
print(hour)
local minute = string.sub(datetime, findT+4, findT + 5)
print(minute)
local second = string.sub(datetime, findT+7, findT+8)
print(second)
monitor.setCursorPos(1, 1)
monitor.write("Year: " .. year)
monitor.setCursorPos(1, 2)
monitor.write("Month: " .. month)
monitor.setCursorPos(1, 3)
monitor.write("Day: " .. day)
monitor.setCursorPos(1, 4)
monitor.write("Hour: " .. hour)
monitor.setCursorPos(1, 5)
monitor.write("Minutes: " .. minute)
monitor.setCursorPos(1, 6)
monitor.write("Seconds: " .. second)
monitor.setCursorPos(1, 7)
monitor.write("Datetime: " .. datetime)
monitor.setTextScale(0.5)
monitor.setCursorPos(1, 8)
monitor.write("req: " .. "http://worldtimeapi.org/api/ip")


